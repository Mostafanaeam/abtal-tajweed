<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ø£Ø¨Ø·Ø§Ù„ Ø§Ù„ØªØ¬ÙˆÙŠØ¯ - Ø§Ù„Ù…Ø¯ Ø§Ù„ÙØ±Ø¹ÙŠ Ø¨Ø³Ø¨Ø¨ Ø§Ù„Ø³ÙƒÙˆÙ†</title>
    <style>
      :root {
        --primary: #ff6b6b;
        --secondary: #4ecdc4;
        --accent: #ffe66d;
        --dark: #2c3e50;
        --light: #f7f9fc;
        --success: #2ecc71;
        --error: #e74c3c;
        --font-main: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        font-family: var(--font-main);
      }

      body {
        background-color: #e0f7fa;
        background-image: radial-gradient(#4ecdc4 1px, transparent 1px);
        background-size: 20px 20px;
        color: var(--dark);
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 20px;
      }

      .container {
        width: 100%;
        max-width: 800px;
        background: white;
        border-radius: 25px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        position: relative;
        border: 5px solid var(--secondary);
      }

      /* Header & Dashboard */
      header {
        background: var(--secondary);
        color: white;
        padding: 20px;
        text-align: center;
        border-bottom: 5px solid rgba(0, 0, 0, 0.1);
        position: relative;
      }

      .mute-btn,
      .lang-btn {
        position: absolute;
        top: 20px;
        background: rgba(255, 255, 255, 0.2);
        border: 2px solid white;
        color: white;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        font-size: 1.2rem;
        cursor: pointer;
        display: flex;
        justify-content: center;
        align-items: center;
        transition: all 0.2s;
        z-index: 10;
      }
      .mute-btn {
        left: 20px;
      }
      .lang-btn {
        left: unset;
        right: 20px;
        width: auto;
        padding: 0 15px;
        border-radius: 20px;
        font-size: 1rem;
        font-weight: bold;
      }

      /* RTL/LTR Adjustments */
      html[dir="ltr"] .mute-btn {
        left: unset;
        right: 20px;
      }
      html[dir="ltr"] .lang-btn {
        right: unset;
        left: 20px;
      }

      .mute-btn:hover,
      .lang-btn:hover {
        background: white;
        color: var(--secondary);
      }

      h1 {
        font-size: 2rem;
        margin-bottom: 5px;
        text-shadow: 2px 2px 0 rgba(0, 0, 0, 0.1);
      }
      h2 {
        font-size: 1.5rem;
        color: var(--dark);
        margin-bottom: 15px;
      }
      h3 {
        color: var(--primary);
        margin: 10px 0;
      }

      .dashboard-stats {
        display: flex;
        justify-content: space-around;
        background: var(--accent);
        padding: 10px;
        font-weight: bold;
        color: var(--dark);
      }

      .stat-box {
        display: flex;
        align-items: center;
        gap: 5px;
      }

      /* Navigation Buttons */
      .nav-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        padding: 40px;
      }

      .big-btn {
        padding: 30px;
        border: none;
        border-radius: 20px;
        font-size: 1.5rem;
        cursor: pointer;
        transition: transform 0.2s, box-shadow 0.2s;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 15px;
        color: white;
        font-weight: bold;
        box-shadow: 0 5px 0 rgba(0, 0, 0, 0.2);
      }

      .big-btn:active {
        transform: translateY(5px);
        box-shadow: none;
      }

      .btn-learn {
        background: var(--primary);
      }
      /* Hero Section */
      .hero-section {
        background: linear-gradient(135deg, var(--secondary), #2980b9);
        color: white;
        padding: 60px 20px;
        text-align: center;
        border-radius: 0 0 50% 50% / 20px;
        margin-bottom: 30px;
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
      }

      .hero-title {
        font-size: 2.5rem;
        margin-bottom: 10px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
      }

      .hero-subtitle {
        font-size: 1.2rem;
        opacity: 0.9;
        margin-bottom: 30px;
      }

      .btn-play {
        background: #9b59b6;
      }

      /* Learning Section */
      .section {
        display: none;
        padding: 20px;
        animation: fadeIn 0.5s;
      }

      .section.active {
        display: block;
      }

      /* Mind Map */
      .mind-map {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 20px;
        margin-bottom: 30px;
      }

      .mm-node {
        background: white;
        border: 3px solid var(--secondary);
        padding: 10px 20px;
        border-radius: 50px;
        font-weight: bold;
        text-align: center;
        box-shadow: 0 4px 0 rgba(0, 0, 0, 0.1);
        position: relative;
      }

      .mm-root {
        background: var(--accent);
        font-size: 1.2rem;
        border-color: #f1c40f;
      }

      .mm-branches {
        display: flex;
        justify-content: center;
        gap: 10px;
        flex-wrap: wrap;
      }

      .mm-leaf {
        background: #e8f8f5;
        font-size: 0.9rem;
      }
      .mm-sub {
        font-size: 0.8rem;
        background: #fdf2e9;
        margin-top: 5px;
      }

      /* Explanation Cards */
      .lesson-card {
        background: #fff;
        border: 2px solid #eee;
        border-radius: 15px;
        padding: 15px;
        margin-bottom: 20px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
      }

      .quran-example {
        font-family: "Traditional Arabic", serif;
        font-size: 1.8rem;
        color: var(--dark);
        background: #fcf8e3;
        padding: 10px;
        border-radius: 10px;
        text-align: center;
        margin: 10px 0;
        border: 1px dashed #d4b168;
      }

      .highlight {
        color: var(--error);
        font-weight: bold;
      }

      /* Game Section */
      .question-box {
        text-align: center;
        padding: 20px;
      }

      .question-text {
        font-size: 1.3rem;
        margin-bottom: 30px;
        background: white;
        padding: 20px;
        border-radius: 15px;
        border: 2px solid var(--secondary);
      }

      .answers-grid {
        display: grid;
        gap: 15px;
      }

      .ans-btn {
        padding: 15px;
        border: 2px solid #ddd;
        background: white;
        border-radius: 10px;
        font-size: 1.1rem;
        cursor: pointer;
        transition: all 0.2s;
      }

      .ans-btn:hover {
        background: var(--light);
        border-color: var(--secondary);
      }

      .tf-grid {
        grid-template-columns: 1fr 1fr;
      }
      .btn-true {
        color: var(--success);
        border-color: var(--success);
      }
      .btn-false {
        color: var(--error);
        border-color: var(--error);
      }

      .btn-true:hover {
        background: #e8f8f5;
      }
      .btn-false:hover {
        background: #fdedec;
      }

      /* Feedback Modal */
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 100;
      }

      .modal {
        background: white;
        padding: 30px;
        border-radius: 20px;
        text-align: center;
        animation: popIn 0.3s;
        max-width: 90%;
      }

      .feedback-icon {
        font-size: 4rem;
        display: block;
        margin-bottom: 10px;
      }

      .home-btn {
        background: var(--dark);
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 50px;
        cursor: pointer;
        margin-top: 20px;
      }

      /* Animations */
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      @keyframes popIn {
        from {
          transform: scale(0.5);
        }
        to {
          transform: scale(1);
        }
      }

      /* Utils */
      .hidden {
        display: none !important;
      }
      .nav-top {
        padding: 10px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <button
          id="mute-btn"
          class="mute-btn"
          onclick="SoundManager.toggleMute()"
        >
          ğŸ”Š
        </button>
        <button id="lang-btn" class="lang-btn" onclick="toggleLanguage()">
          ï¿½ğŸ‡¸ English
        </button>
        <!-- Header content moved to Hero for better design in Home, 
             but we keep a minimal header or just branding if needed. 
             For this design, let's keep the header simple or merge. -->
      </header>

      <!-- Dashboard Info -->
      <div class="dashboard-stats">
        <div class="stat-box">
          <span data-i18n="score_label">â­ Ø§Ù„Ù†Ù‚Ø§Ø·:</span>
          <span id="score">0</span>
        </div>
        <div class="stat-box">
          <span data-i18n="level_label">ğŸ† Ø§Ù„Ù…Ø³ØªÙˆÙ‰:</span>
          <span id="level" data-i18n="level_beginner">Ù…Ø¨ØªØ¯Ø¦</span>
        </div>
      </div>

      <!-- Home Screen (Hero) -->
      <div id="home" class="section active" style="padding: 0">
        <div class="hero-section">
          <h1 class="hero-title" data-i18n="hero_title">ğŸŒŸ Ø£Ø¨Ø·Ø§Ù„ Ø§Ù„ØªØ¬ÙˆÙŠØ¯ ğŸŒŸ</h1>
          <p class="hero-subtitle" data-i18n="hero_subtitle">
            Ø±Ø­Ù„Ø© Ù…Ù…ØªØ¹Ø© Ù„ØªØ¹Ù„Ù… Ø£Ø­ÙƒØ§Ù… Ø§Ù„Ù…Ø¯ Ø§Ù„ÙØ±Ø¹ÙŠ Ø¨Ø³Ø¨Ø¨ Ø§Ù„Ø³ÙƒÙˆÙ†
          </p>
        </div>

        <div class="nav-grid">
          <button class="big-btn btn-learn" onclick="showSection('learn')">
            <span data-i18n="btn_learn">ğŸ“š Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ¹Ù„Ù…</span>
            <span
              style="font-size: 1rem; font-weight: normal"
              data-i18n="btn_learn_desc"
              >Ø´Ø±Ø­ ÙˆØ®Ø±Ø§Ø¦Ø· Ø°Ù‡Ù†ÙŠØ©</span
            >
          </button>
          <button class="big-btn btn-play" onclick="startQuiz()">
            <span data-i18n="btn_play">ğŸ® Ø§Ù„Ø¹Ø¨ ÙˆØ§Ø®ØªØ¨Ø± Ù†ÙØ³Ùƒ</span>
            <span
              style="font-size: 1rem; font-weight: normal"
              data-i18n="btn_play_desc"
              >Ø£Ø³Ø¦Ù„Ø© ÙˆØªØ­Ø¯ÙŠØ§Øª</span
            >
          </button>
        </div>
      </div>

      <!-- Learn Screen -->
      <div id="learn" class="section">
        <div class="nav-top">
          <h2 data-i18n="mindmap_title">ğŸ§  Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø°Ù‡Ù†ÙŠØ©</h2>
          <button
            class="home-btn"
            onclick="showSection('home')"
            data-i18n="btn_home"
          >
            ğŸ  Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
          </button>
        </div>

        <div class="mind-map">
          <div class="mm-node mm-root" data-i18n="mm_root">
            Ø§Ù„Ù…Ø¯ Ø§Ù„ÙØ±Ø¹ÙŠ Ø¨Ø³Ø¨Ø¨ Ø§Ù„Ø³ÙƒÙˆÙ†
          </div>
          <div style="font-size: 2rem; color: #ccc">â¬‡</div>
          <div class="mm-branches">
            <div
              style="display: flex; flex-direction: column; align-items: center"
            >
              <button
                class="mm-node mm-leaf"
                onclick="scrollToId('arid')"
                data-i18n="mm_arid"
              >
                Ø§Ù„Ù…Ø¯ Ø§Ù„Ø¹Ø§Ø±Ø¶ Ù„Ù„Ø³ÙƒÙˆÙ†
              </button>
            </div>
            <div
              style="display: flex; flex-direction: column; align-items: center"
            >
              <button
                class="mm-node mm-leaf"
                onclick="scrollToId('leen')"
                data-i18n="mm_leen"
              >
                Ù…Ø¯ Ø§Ù„Ù„ÙŠÙ†
              </button>
            </div>
            <div
              style="display: flex; flex-direction: column; align-items: center"
            >
              <div
                class="mm-node mm-leaf"
                style="background: #fce4ec"
                data-i18n="mm_lazim"
              >
                Ø§Ù„Ù…Ø¯ Ø§Ù„Ù„Ø§Ø²Ù…
              </div>
              <div class="mm-branches" style="margin-top: 5px">
                <span class="mm-node mm-sub" data-i18n="mm_lazim_kalimi"
                  >ÙƒÙ„Ù…ÙŠ</span
                >
                <span class="mm-node mm-sub" data-i18n="mm_lazim_harfi"
                  >Ø­Ø±ÙÙŠ</span
                >
              </div>
            </div>
          </div>
        </div>

        <hr
          style="margin: 20px 0; border: none; height: 2px; background: #eee"
        />

        <!-- Content Details -->
        <div id="arid" class="lesson-card">
          <h3>
            <span data-i18n="lesson1_title">ğŸ”¹ 1. Ø§Ù„Ù…Ø¯ Ø§Ù„Ø¹Ø§Ø±Ø¶ Ù„Ù„Ø³ÙƒÙˆÙ†</span>
          </h3>
          <p>
            <strong data-i18n="def_label">Ø§Ù„ØªØ¹Ø±ÙŠÙ:</strong>
            <span data-i18n="lesson1_def"
              >Ù‡Ùˆ Ø£Ù† ÙŠØ£ØªÙŠ Ø¨Ø¹Ø¯ Ø­Ø±Ù Ø§Ù„Ù…Ø¯ Ø­Ø±Ù Ø³Ø§ÙƒÙ† Ø¨Ø³Ø¨Ø¨ Ø§Ù„ÙˆÙ‚Ù Ø¹Ù„ÙŠÙ‡.</span
            >
          </p>
          <br />
          <div style="background: #e3f2fd; padding: 10px; border-radius: 8px">
            <p>
              ğŸ›‘ <strong data-i18n="stop_rule_label">Ø¹Ù†Ø¯ Ø§Ù„ÙˆÙ‚Ù:</strong>
              <span data-i18n="lesson1_rule_stop">ÙŠÙ…Ø¯ 2 Ø£Ùˆ 4 Ø£Ùˆ 6 Ø­Ø±ÙƒØ§Øª.</span>
            </p>
            <p>
              ğŸŸ¢ <strong data-i18n="connect_rule_label">Ø¹Ù†Ø¯ Ø§Ù„ÙˆØµÙ„:</strong>
              <span data-i18n="lesson1_rule_connect"
                >ÙŠÙ…Ø¯ Ø­Ø±ÙƒØªÙŠÙ† ÙÙ‚Ø· (Ù…Ø¯ Ø·Ø¨ÙŠØ¹ÙŠ).</span
              >
            </p>
          </div>
          <br />
          <h4 data-i18n="examples_label">Ø£Ù…Ø«Ù„Ø© ÙˆØªØ·Ø¨ÙŠÙ‚Ø§Øª (Ø³ÙˆØ±Ø© Ø§Ù„ÙØ§ØªØ­Ø©):</h4>
          <div class="quran-example">
            ÙŠÙØ¹Ù’Ù„ÙÙ…ÙÙˆÙ†<span class="highlight">Ù</span> â¬… ÙŠÙØ¹Ù’Ù„ÙÙ…ÙÙˆÙ†<span
              class="highlight"
              >Ù’</span
            >
          </div>
          <div class="quran-example">
            Ø§Ù„Ø±Ù‘ÙØ­ÙÙŠ<span class="highlight">Ù…Ù</span> â¬… Ø§Ù„Ø±Ù‘ÙØ­ÙÙŠ<span
              class="highlight"
              >Ù…Ù’</span
            >
          </div>
          <div class="quran-example">
            Ù†ÙØ³Ù’ØªÙØ¹ÙÙŠ<span class="highlight">Ù†Ù</span> â¬… Ù†ÙØ³Ù’ØªÙØ¹ÙÙŠ<span
              class="highlight"
              >Ù†Ù’</span
            >
          </div>
        </div>

        <div id="leen" class="lesson-card">
          <h3><span data-i18n="lesson2_title">ğŸ”¹ 2. Ù…Ø¯ Ø§Ù„Ù„ÙŠÙ†</span></h3>
          <p>
            <strong data-i18n="def_label">Ø§Ù„ØªØ¹Ø±ÙŠÙ:</strong>
            <span data-i18n="lesson2_def"
              >Ù‡Ùˆ Ø§Ù„ÙˆØ§Ùˆ Ø£Ùˆ Ø§Ù„ÙŠØ§Ø¡ Ø§Ù„Ø³Ø§ÙƒÙ†Ø© Ø§Ù„Ù…ÙØªÙˆØ­ Ù…Ø§ Ù‚Ø¨Ù„Ù‡Ø§ØŒ ÙˆØ¨Ø¹Ø¯Ù‡Ø§ Ø³ÙƒÙˆÙ† Ø¹Ø§Ø±Ø¶
              Ù„Ù„ÙˆÙ‚Ù.</span
            >
          </p>
          <br />
          <div style="background: #e8f5e9; padding: 10px; border-radius: 8px">
            <p>
              ğŸ›‘ <strong data-i18n="condition_label">Ø´Ø±Ø· Ø§Ù„ØªØ·Ø¨ÙŠÙ‚:</strong>
              <span data-i18n="lesson2_condition">Ø§Ù„ÙˆÙ‚Ù ÙÙ‚Ø·.</span>
            </p>
            <p>
              ğŸ“ <strong data-i18n="amount_label">Ø§Ù„Ù…Ù‚Ø¯Ø§Ø±:</strong>
              <span data-i18n="lesson2_amount">2 Ø£Ùˆ 4 Ø£Ùˆ 6 Ø­Ø±ÙƒØ§Øª.</span>
            </p>
          </div>
          <br />
          <h4 data-i18n="examples_label">Ø£Ù…Ø«Ù„Ø© ÙˆØªØ·Ø¨ÙŠÙ‚Ø§Øª (Ø³ÙˆØ±Ø© Ù‚Ø±ÙŠØ´):</h4>
          <div class="quran-example">
            Ù‚ÙØ±Ù<span class="highlight">ÙŠÙ’</span>Ø´Ù â¬… Ù‚ÙØ±ÙÙŠÙ’Ø´Ù’
          </div>
          <div class="quran-example">
            Ø§Ù„ØµÙ‘Ù<span class="highlight">ÙŠÙ’</span>ÙÙ â¬… Ø§Ù„ØµÙ‘ÙÙŠÙ’ÙÙ’
          </div>
          <div class="quran-example">
            Ø®Ù<span class="highlight">ÙˆÙ’</span>ÙÙ â¬… Ø®ÙÙˆÙ’ÙÙ’
          </div>
        </div>
      </div>

      <!-- Game Screen -->
      <div id="game" class="section">
        <div class="nav-top">
          <h2 id="phase-title" data-i18n="phase1_title">
            Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰: ØµØ­ Ø£Ù… Ø®Ø·Ø£
          </h2>
          <button
            class="home-btn"
            onclick="showSection('home')"
            data-i18n="btn_exit"
          >
            Ø®Ø±ÙˆØ¬
          </button>
        </div>

        <div class="question-box">
          <div id="question-text" class="question-text">Ø§Ù„Ø³Ø¤Ø§Ù„ ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§...</div>

          <!-- TF Buttons -->
          <div id="tf-buttons" class="answers-grid tf-grid hidden">
            <button
              class="ans-btn btn-true"
              onclick="checkAnswer(true)"
              data-i18n="btn_true"
            >
              âœ”ï¸ ØµØ­
            </button>
            <button
              class="ans-btn btn-false"
              onclick="checkAnswer(false)"
              data-i18n="btn_false"
            >
              âŒ Ø®Ø·Ø£
            </button>
          </div>

          <!-- MCQ Buttons -->
          <div id="mcq-buttons" class="answers-grid hidden">
            <!-- Will be populated by JS -->
          </div>
        </div>
        <div style="text-align: center; margin-top: 20px; color: #7f8c8d">
          <span data-i18n="q_label">Ø§Ù„Ø³Ø¤Ø§Ù„</span> <span id="q-num">1</span>
          <span data-i18n="of_label">Ù…Ù†</span> 10
        </div>
      </div>
    </div>

    <!-- Result Modal -->
    <div id="feedback-modal" class="modal-overlay">
      <div class="modal">
        <span id="feedback-icon" class="feedback-icon">ğŸ‰</span>
        <h2 id="feedback-title">Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©!</h2>
        <p id="feedback-msg">Ø£Ø­Ø³Ù†Øª ÙŠØ§ Ø¨Ø·Ù„!</p>
        <button
          class="home-btn"
          style="background: var(--secondary)"
          onclick="nextQuestion()"
        >
          Ø§Ù„ØªØ§Ù„ÙŠ â¡
        </button>
      </div>
    </div>

    <script>
      // --- I18n Data ---
      const translations = {
        title: {
          ar: "Ø£Ø¨Ø·Ø§Ù„ Ø§Ù„ØªØ¬ÙˆÙŠØ¯ - Ø§Ù„Ù…Ø¯ Ø§Ù„ÙØ±Ø¹ÙŠ",
          en: "Tajweed Heroes - Secondary Madd",
        },
        hero_title: { ar: "ğŸŒŸ Ø£Ø¨Ø·Ø§Ù„ Ø§Ù„ØªØ¬ÙˆÙŠØ¯ ğŸŒŸ", en: "ğŸŒŸ Tajweed Heroes ğŸŒŸ" },
        hero_subtitle: {
          ar: "Ø±Ø­Ù„Ø© Ù…Ù…ØªØ¹Ø© Ù„ØªØ¹Ù„Ù… Ø£Ø­ÙƒØ§Ù… Ø§Ù„Ù…Ø¯ Ø§Ù„ÙØ±Ø¹ÙŠ Ø¨Ø³Ø¨Ø¨ Ø§Ù„Ø³ÙƒÙˆÙ†",
          en: "A fun journey to learn Secondary Madd due to Sukoon",
        },
        score_label: { ar: "â­ Ø§Ù„Ù†Ù‚Ø§Ø·:", en: "â­ Score:" },
        level_label: { ar: "ğŸ† Ø§Ù„Ù…Ø³ØªÙˆÙ‰:", en: "ğŸ† Level:" },

        btn_learn: { ar: "ğŸ“š Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ¹Ù„Ù…", en: "ğŸ“š Start Learning" },
        btn_learn_desc: {
          ar: "Ø´Ø±Ø­ ÙˆØ®Ø±Ø§Ø¦Ø· Ø°Ù‡Ù†ÙŠØ©",
          en: "Explanations & Mind Maps",
        },
        btn_play: { ar: "ğŸ® Ø§Ù„Ø¹Ø¨ ÙˆØ§Ø®ØªØ¨Ø± Ù†ÙØ³Ùƒ", en: "ğŸ® Play & Quiz" },
        btn_play_desc: { ar: "Ø£Ø³Ø¦Ù„Ø© ÙˆØªØ­Ø¯ÙŠØ§Øª", en: "Questions & Challenges" },

        mindmap_title: { ar: "ğŸ§  Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø°Ù‡Ù†ÙŠØ©", en: "ğŸ§  Mind Map" },
        btn_home: { ar: "ğŸ  Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©", en: "ğŸ  Home" },

        mm_root: {
          ar: "Ø§Ù„Ù…Ø¯ Ø§Ù„ÙØ±Ø¹ÙŠ Ø¨Ø³Ø¨Ø¨ Ø§Ù„Ø³ÙƒÙˆÙ†",
          en: "Secondary Madd (Sukoon)",
        },
        mm_arid: { ar: "Ø§Ù„Ù…Ø¯ Ø§Ù„Ø¹Ø§Ø±Ø¶ Ù„Ù„Ø³ÙƒÙˆÙ†", en: "Madd Arid li-Sukoon" },
        mm_leen: { ar: "Ù…Ø¯ Ø§Ù„Ù„ÙŠÙ†", en: "Madd Leen" },
        mm_lazim: { ar: "Ø§Ù„Ù…Ø¯ Ø§Ù„Ù„Ø§Ø²Ù…", en: "Madd Lazim" },
        mm_lazim_kalimi: { ar: "ÙƒÙ„Ù…ÙŠ", en: "Kalimi (Word)" },
        mm_lazim_harfi: { ar: "Ø­Ø±ÙÙŠ", en: "Harfi (Letter)" },

        lesson1_title: {
          ar: "ğŸ”¹ 1. Ø§Ù„Ù…Ø¯ Ø§Ù„Ø¹Ø§Ø±Ø¶ Ù„Ù„Ø³ÙƒÙˆÙ†",
          en: "ğŸ”¹ 1. Madd Arid li-Sukoon",
        },
        def_label: { ar: "Ø§Ù„ØªØ¹Ø±ÙŠÙ:", en: "Definition:" },
        lesson1_def: {
          ar: "Ù‡Ùˆ Ø£Ù† ÙŠØ£ØªÙŠ Ø¨Ø¹Ø¯ Ø­Ø±Ù Ø§Ù„Ù…Ø¯ Ø­Ø±Ù Ø³Ø§ÙƒÙ† Ø¨Ø³Ø¨Ø¨ Ø§Ù„ÙˆÙ‚Ù Ø¹Ù„ÙŠÙ‡.",
          en: "When a Madd letter is followed by a sukoon caused by stopping.",
        },
        stop_rule_label: { ar: "Ø¹Ù†Ø¯ Ø§Ù„ÙˆÙ‚Ù:", en: "When Stopping:" },
        connect_rule_label: { ar: "Ø¹Ù†Ø¯ Ø§Ù„ÙˆØµÙ„:", en: "When Connecting:" },
        lesson1_rule_stop: {
          ar: "ÙŠÙ…Ø¯ 2 Ø£Ùˆ 4 Ø£Ùˆ 6 Ø­Ø±ÙƒØ§Øª.",
          en: "Prolong for 2, 4, or 6 counts.",
        },
        lesson1_rule_connect: {
          ar: "ÙŠÙ…Ø¯ Ø­Ø±ÙƒØªÙŠÙ† ÙÙ‚Ø· (Ù…Ø¯ Ø·Ø¨ÙŠØ¹ÙŠ).",
          en: "Prolong for 2 counts (Natural Madd).",
        },
        examples_label: { ar: "Ø£Ù…Ø«Ù„Ø© ÙˆØªØ·Ø¨ÙŠÙ‚Ø§Øª:", en: "Examples:" },

        lesson2_title: { ar: "ğŸ”¹ 2. Ù…Ø¯ Ø§Ù„Ù„ÙŠÙ†", en: "ğŸ”¹ 2. Madd Leen" },
        lesson2_def: {
          ar: "Ù‡Ùˆ Ø§Ù„ÙˆØ§Ùˆ Ø£Ùˆ Ø§Ù„ÙŠØ§Ø¡ Ø§Ù„Ø³Ø§ÙƒÙ†Ø© Ø§Ù„Ù…ÙØªÙˆØ­ Ù…Ø§ Ù‚Ø¨Ù„Ù‡Ø§ØŒ ÙˆØ¨Ø¹Ø¯Ù‡Ø§ Ø³ÙƒÙˆÙ† Ø¹Ø§Ø±Ø¶ Ù„Ù„ÙˆÙ‚Ù.",
          en: "Static Waw or Ya preceded by Fatha, followed by sukoon due to stopping.",
        },
        condition_label: { ar: "Ø´Ø±Ø· Ø§Ù„ØªØ·Ø¨ÙŠÙ‚:", en: "Condition:" },
        lesson2_condition: { ar: "Ø§Ù„ÙˆÙ‚Ù ÙÙ‚Ø·.", en: "Stopping only." },
        amount_label: { ar: "Ø§Ù„Ù…Ù‚Ø¯Ø§Ø±:", en: "Duration:" },
        lesson2_amount: { ar: "2 Ø£Ùˆ 4 Ø£Ùˆ 6 Ø­Ø±ÙƒØ§Øª.", en: "2, 4, or 6 counts." },

        phase1_title: {
          ar: "Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰: ØµØ­ Ø£Ù… Ø®Ø·Ø£",
          en: "Phase 1: True or False",
        },
        phase2_title: {
          ar: "Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©: Ø§Ø®ØªØ± Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©",
          en: "Phase 2: Multiple Choice",
        },
        btn_exit: { ar: "Ø®Ø±ÙˆØ¬", en: "Exit" },
        btn_true: { ar: "âœ”ï¸ ØµØ­", en: "âœ”ï¸ True" },
        btn_false: { ar: "âŒ Ø®Ø·Ø£", en: "âŒ False" },

        q_label: { ar: "Ø§Ù„Ø³Ø¤Ø§Ù„", en: "Question" },
        of_label: { ar: "Ù…Ù†", en: "of" },

        level_beginner: { ar: "Ù…Ø¨ØªØ¯Ø¦", en: "Beginner" },
        level_intermediate: { ar: "Ù…ØªÙˆØ³Ø·", en: "Intermediate" },
        level_master: { ar: "Ø£Ø³ØªØ§Ø° Ø§Ù„ØªØ¬ÙˆÙŠØ¯", en: "Tajweed Master" },

        feedback_correct: { ar: "Ø¥Ø¬Ø§Ø¨Ø© Ù…Ù…ØªØ§Ø²Ø©!", en: "Excellent!" },
        feedback_correct_msg: {
          ar: "Ø£Ø­Ø³Ù†ØªØŒ Ø§Ø³ØªÙ…Ø± ÙŠØ§ Ø¨Ø·Ù„!",
          en: "Great job, keep going!",
        },
        feedback_wrong: { ar: "Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰", en: "Try Again" },
        feedback_wrong_msg: {
          ar: "Ù„Ø§ Ø¨Ø£Ø³ØŒ ØªØ¹Ù„Ù… Ù…Ù† Ø®Ø·Ø¦Ùƒ ÙˆØªØ§Ø¨Ø¹.",
          en: "It's okay, learn and continue.",
        },

        game_over: { ar: "Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø©!", en: "Game Over!" },
        final_score: { ar: "Ù†Ù‚Ø§Ø·Ùƒ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©: ", en: "Final Score: " },
        your_level: { ar: "Ù…Ø³ØªÙˆØ§Ùƒ: ", en: "Your Level: " },
        btn_next: { ar: "Ø§Ù„ØªØ§Ù„ÙŠ â¡", en: "Next â¡" },
        btn_home_back: { ar: "Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©", en: "Back to Home" },
      };

      // --- Data ---
      const tfQuestions = [
        {
          q: {
            ar: "ÙŠÙØ¹Ø±Ù Ø§Ù„Ù…Ø¯ Ø§Ù„Ø¹Ø§Ø±Ø¶ Ù„Ù„Ø³ÙƒÙˆÙ† Ø¨Ø£Ù†Ù‡ Ø­Ø±Ù Ù…Ø¯ ÙŠØ£ØªÙŠ Ø¨Ø¹Ø¯Ù‡ Ø­Ø±Ù Ø³Ø§ÙƒÙ† Ø¨Ø³Ø¨Ø¨ Ø§Ù„ÙˆÙ‚Ù.",
            en: "Madd Arid is defined as a Madd letter followed by a sukoon due to stopping.",
          },
          a: true,
        },
        {
          q: {
            ar: "ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù„ÙˆØµÙ„ØŒ ÙŠÙÙ…Ø¯ Ø§Ù„Ù…Ø¯ Ø§Ù„Ø¹Ø§Ø±Ø¶ Ù„Ù„Ø³ÙƒÙˆÙ† Ø­Ø±ÙƒØªÙŠÙ† ÙÙ‚Ø·.",
            en: "In 'Wisl' (connecting), Madd Arid is prolonged for only 2 counts.",
          },
          a: true,
        },
        {
          q: {
            ar: "ÙŠÙØ·Ø¨Ù‚ Ù…Ø¯ Ø§Ù„Ù„ÙŠÙ† ÙÙŠ Ø§Ù„ÙˆØµÙ„ ÙˆØ§Ù„ÙˆÙ‚Ù.",
            en: "Madd Leen applies in both connecting and stopping.",
          },
          a: false,
        },
        {
          q: {
            ar: "Ù…Ù‚Ø¯Ø§Ø± Ù…Ø¯ Ø§Ù„Ù„ÙŠÙ† Ø¹Ù†Ø¯ Ø§Ù„ÙˆÙ‚Ù (2 Ø£Ùˆ 4 Ø£Ùˆ 6).",
            en: "Madd Leen duration when stopping is 2, 4, or 6.",
          },
          a: true,
        },
        {
          q: {
            ar: "ÙƒÙ„Ù…Ø© (Ù‚ÙØ±ÙÙŠÙ’Ø´Ù) Ù…Ø«Ø§Ù„ Ø¹Ù„Ù‰ Ù…Ø¯ Ø§Ù„Ù„ÙŠÙ† Ø¹Ù†Ø¯ Ø§Ù„ÙˆÙ‚Ù.",
            en: "The word (Quraish) is an example of Madd Leen when stopping.",
          },
          a: true,
        },
      ];

      const mcqQuestions = [
        {
          q: {
            ar: "Ù…Ù‚Ø¯Ø§Ø± Ø§Ù„Ù…Ø¯ Ø§Ù„Ø¹Ø§Ø±Ø¶ Ù„Ù„Ø³ÙƒÙˆÙ† Ø¹Ù†Ø¯ Ø§Ù„ÙˆÙ‚Ù Ù‡Ùˆ:",
            en: "The duration of Madd Arid when stopping is:",
          },
          options: {
            ar: ["Ø­Ø±ÙƒØ© ÙˆØ§Ø­Ø¯Ø©", "2 Ø£Ùˆ 4 Ø£Ùˆ 6 Ø­Ø±ÙƒØ§Øª", "5 Ø­Ø±ÙƒØ§Øª ÙˆØ¬ÙˆØ¨Ø§Ù‹"],
            en: ["1 count", "2, 4, or 6 counts", "5 counts widely"],
          },
          a: 1,
        },
        {
          q: {
            ar: "Ø´Ø±Ø· Ø§Ù„ÙˆØ§Ùˆ ÙˆØ§Ù„ÙŠØ§Ø¡ ÙÙŠ Ù…Ø¯ Ø§Ù„Ù„ÙŠÙ† Ø£Ù† ØªÙƒÙˆÙ†Ø§:",
            en: "The condition for Waw/Ya in Madd Leen is to be:",
          },
          options: {
            ar: ["Ù…ØªØ­Ø±ÙƒØªÙŠÙ†", "Ø³Ø§ÙƒÙ†ØªÙŠÙ† ÙˆÙ‚Ø¨Ù„Ù‡Ù…Ø§ ÙƒØ³Ø±", "Ø³Ø§ÙƒÙ†ØªÙŠÙ† ÙˆÙ‚Ø¨Ù„Ù‡Ù…Ø§ ÙØªØ­"],
            en: [
              "Voweled",
              "Static preceded by Kasra",
              "Static preceded by Fatha",
            ],
          },
          a: 2,
        },
        {
          q: {
            ar: "Ø£ÙŠ ÙƒÙ„Ù…Ø© Ù…Ù…Ø§ ÙŠÙ„ÙŠ ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù…Ø¯ Ù„ÙŠÙ†ØŸ",
            en: "Which word contains Madd Leen?",
          },
          options: {
            ar: ["Ø§Ù„Ù’Ø¨ÙÙŠÙ’ØªÙ", "Ø§Ù„Ø±Ù‘ÙØ­ÙÙŠÙ…Ù", "Ø§Ù„Ø³Ù‘ÙÙ…ÙØ§Ø¡Ù"],
            en: ["Al-Bayt", "Ar-Raheem", "As-Samaa"],
          },
          a: 0,
        },
        {
          q: {
            ar: "ÙŠÙ†Ù‚Ø³Ù… Ø§Ù„Ù…Ø¯ Ø§Ù„Ù„Ø§Ø²Ù… Ø§Ù„ÙƒÙ„Ù…ÙŠ Ø¥Ù„Ù‰:",
            en: "Madd Lazim Kalimi is divided into:",
          },
          options: {
            ar: ["Ù…Ø«Ù‚Ù„ ÙˆÙ…Ø®ÙÙ", "Ø¹Ø§Ø±Ø¶ ÙˆÙ„ÙŠÙ†", "Ù…ØªØµÙ„ ÙˆÙ…Ù†ÙØµÙ„"],
            en: [
              "Heavy (Muthaqal) and Light (Mukhaffaf)",
              "Arid and Leen",
              "Connected and Disconnected",
            ],
          },
          a: 0,
        },
        {
          q: {
            ar: "Ø£ÙŠ Ù…Ø¯ ÙŠÙ†Ø¯Ø±Ø¬ ØªØ­Øª Ø§Ù„Ù…Ø¯ Ø§Ù„ÙØ±Ø¹ÙŠ Ø¨Ø³Ø¨Ø¨ Ø§Ù„Ø³ÙƒÙˆÙ†ØŸ",
            en: "Which Madd is Secondary due to Sukoon?",
          },
          options: {
            ar: ["Ø§Ù„Ù…Ø¯ Ø§Ù„Ù…ØªØµÙ„", "Ø§Ù„Ù…Ø¯ Ø§Ù„Ø¹Ø§Ø±Ø¶ Ù„Ù„Ø³ÙƒÙˆÙ†", "Ù…Ø¯ Ø§Ù„Ø¨Ø¯Ù„"],
            en: ["Madd Muttasil", "Madd Arid li-Sukoon", "Madd Badal"],
          },
          a: 1,
        },
      ];

      // --- State ---
      let score = 0;
      let currentQIndex = 0;
      let isPhase2 = false;
      let currentLevel = "Ù…Ø¨ØªØ¯Ø¦";
      let currentLang = "ar";

      // --- Logic ---

      function toggleLanguage() {
        currentLang = currentLang === "ar" ? "en" : "ar";
        updateLanguage();
      }

      function updateLanguage() {
        // Update DOM Elements
        document.documentElement.lang = currentLang;
        document.documentElement.dir = currentLang === "ar" ? "rtl" : "ltr";

        // Update Button Text
        document.getElementById("lang-btn").innerText =
          currentLang === "ar" ? "ğŸ‡ºğŸ‡¸ English" : "ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©";

        // Update Text Content
        document.querySelectorAll("[data-i18n]").forEach((el) => {
          const key = el.getAttribute("data-i18n");
          if (translations[key] && translations[key][currentLang]) {
            el.innerText = translations[key][currentLang];
          }
        });

        // Refresh specific dynamic areas if needed
        updateStats();
        // If in game, reload question text
        if (document.getElementById("game").classList.contains("active")) {
          loadQuestion(); // Reload to update question text
        }
      }

      function showSection(id) {
        document
          .querySelectorAll(".section")
          .forEach((s) => s.classList.remove("active"));
        document.getElementById(id).classList.add("active");
        window.scrollTo(0, 0);
      }

      function scrollToId(id) {
        document.getElementById(id).scrollIntoView({ behavior: "smooth" });
      }

      function updateStats() {
        document.getElementById("score").innerText = score;
        if (score >= 50)
          currentLevel =
            translations.level_intermediate[currentLang]; // "Ù…ØªÙˆØ³Ø·";
        else if (score >= 80)
          currentLevel =
            translations.level_master[currentLang]; // "Ø£Ø³ØªØ§Ø° Ø§Ù„ØªØ¬ÙˆÙŠØ¯";
        else currentLevel = translations.level_beginner[currentLang]; // "Ù…Ø¨ØªØ¯Ø¦";

        document.getElementById("level").innerText = currentLevel;
      }

      function startQuiz() {
        score = 0;
        currentQIndex = 0;
        isPhase2 = false;
        updateStats();
        showSection("game");
        loadQuestion();
        SoundManager.init(); // Ensure audio context starts
      }

      function loadQuestion() {
        document.getElementById("feedback-modal").style.display = "none";

        // Check phases
        if (!isPhase2 && currentQIndex >= tfQuestions.length) {
          isPhase2 = true;
          currentQIndex = 0;
          // Intro to Phase 2 alert or animation could go here
        }

        if (isPhase2 && currentQIndex >= mcqQuestions.length) {
          finishGame();
          return;
        }

        // Update UI Text
        document.getElementById("q-num").innerText =
          (isPhase2 ? 5 : 0) + currentQIndex + 1;
        document.getElementById("phase-title").innerText = isPhase2
          ? translations.phase2_title[currentLang]
          : translations.phase1_title[currentLang];

        const qBox = document.getElementById("question-text");
        const tfBtns = document.getElementById("tf-buttons");
        const mcqBtns = document.getElementById("mcq-buttons");

        if (!isPhase2) {
          // TF Mode
          qBox.innerText = tfQuestions[currentQIndex].q[currentLang];
          tfBtns.classList.remove("hidden");
          mcqBtns.classList.add("hidden");
        } else {
          // MCQ Mode
          const qData = mcqQuestions[currentQIndex];
          qBox.innerText = qData.q[currentLang];
          tfBtns.classList.add("hidden");
          mcqBtns.classList.remove("hidden");

          mcqBtns.innerHTML = "";
          qData.options[currentLang].forEach((opt, index) => {
            const btn = document.createElement("button");
            btn.className = "ans-btn";
            btn.innerText = opt;
            btn.onclick = () => checkAnswer(index);
            mcqBtns.appendChild(btn);
          });
        }
      }

      function checkAnswer(userAns) {
        let isCorrect = false;

        if (!isPhase2) {
          isCorrect = userAns === tfQuestions[currentQIndex].a;
        } else {
          isCorrect = userAns === mcqQuestions[currentQIndex].a;
        }

        if (isCorrect) {
          score += 10;
          showFeedback(true);
          SoundManager.play("success");
        } else {
          showFeedback(false);
          SoundManager.play("error");
        }
        updateStats();
      }

      function showFeedback(isCorrect) {
        const modal = document.getElementById("feedback-modal");
        const icon = document.getElementById("feedback-icon");
        const title = document.getElementById("feedback-title");
        const msg = document.getElementById("feedback-msg");
        const btn = modal.querySelector("button");

        modal.style.display = "flex";

        // Reset button in case coming from finishGame
        btn.onclick = nextQuestion;
        btn.innerText = translations.btn_next[currentLang];

        if (isCorrect) {
          icon.innerText = "ğŸŒŸ";
          title.innerText = translations.feedback_correct[currentLang];
          title.style.color = "var(--success)";
          msg.innerText = translations.feedback_correct_msg[currentLang];
        } else {
          icon.innerText = "ğŸ¤”";
          title.innerText = translations.feedback_wrong[currentLang];
          title.style.color = "var(--error)";
          msg.innerText = translations.feedback_wrong_msg[currentLang];
        }
      }

      function nextQuestion() {
        currentQIndex++;
        loadQuestion();
      }

      function finishGame() {
        const modal = document.getElementById("feedback-modal");
        modal.style.display = "flex";
        document.getElementById("feedback-icon").innerText = "ğŸ†";
        document.getElementById("feedback-title").innerText =
          translations.game_over[currentLang];
        SoundManager.play("win");
        document.getElementById(
          "feedback-msg"
        ).innerHTML = `${translations.final_score[currentLang]} ${score} / 100<br>${translations.your_level[currentLang]} ${currentLevel}`;

        // Change button to go home
        const btn = modal.querySelector("button");
        btn.innerText = translations.btn_home_back[currentLang];
        btn.onclick = () => {
          modal.style.display = "none";
          showSection("home");
          // Reset button behavior for next game
          btn.innerText = translations.btn_next[currentLang];
          btn.onclick = nextQuestion;
        };
      }

      // --- Sound System ---
      // --- Sound System (Web Audio API) ---
      const SoundManager = {
        ctx: null,
        isMuted: false,

        init: function () {
          if (!this.ctx) {
            const AudioContext =
              window.AudioContext || window.webkitAudioContext;
            this.ctx = new AudioContext();
          }
          if (this.ctx.state === "suspended") {
            this.ctx.resume();
          }
        },

        play: function (type) {
          if (this.isMuted) return;
          this.init(); // Ensure context is ready

          const t = this.ctx.currentTime;
          const osc = this.ctx.createOscillator();
          const gain = this.ctx.createGain();

          osc.connect(gain);
          gain.connect(this.ctx.destination);

          switch (type) {
            case "click":
              // Short high-pitch "pop"
              osc.type = "sine";
              osc.frequency.setValueAtTime(800, t);
              osc.frequency.exponentialRampToValueAtTime(300, t + 0.1);
              gain.gain.setValueAtTime(0.1, t);
              gain.gain.exponentialRampToValueAtTime(0.01, t + 0.1);
              osc.start(t);
              osc.stop(t + 0.1);
              break;

            case "success":
              // "Ding" - Major chime
              this.playTone(600, "sine", 0.1, 0, 0.1); // C
              this.playTone(800, "sine", 0.1, 0.1, 0.1); // E
              setTimeout(() => this.playTone(1200, "sine", 0.3, 0, 0.4), 200); // High G
              break;

            case "error":
              // "Buzz" - Sawtooth descending
              osc.type = "sawtooth";
              osc.frequency.setValueAtTime(150, t);
              osc.frequency.linearRampToValueAtTime(50, t + 0.3);
              gain.gain.setValueAtTime(0.1, t);
              gain.gain.linearRampToValueAtTime(0.01, t + 0.3);
              osc.start(t);
              osc.stop(t + 0.3);
              break;

            case "win":
              // Fanfare sequence
              const notes = [523.25, 659.25, 783.99, 1046.5]; // C E G C
              notes.forEach((freq, i) => {
                this.playTone(freq, "square", 0.1, i * 0.1, 0.1, 0.05);
              });
              this.playTone(1046.5, "square", 0.4, 0.4, 0.1); // Hold last note
              break;
          }
        },

        playTone: function (freq, type, duration, delay = 0, vol = 0.1) {
          const osc = this.ctx.createOscillator();
          const gain = this.ctx.createGain();
          const t = this.ctx.currentTime + delay;

          osc.connect(gain);
          gain.connect(this.ctx.destination);

          osc.type = type;
          osc.frequency.value = freq;

          gain.gain.setValueAtTime(vol, t);
          gain.gain.exponentialRampToValueAtTime(0.01, t + duration);

          osc.start(t);
          osc.stop(t + duration);
        },

        toggleMute: function () {
          this.isMuted = !this.isMuted;
          const btn = document.getElementById("mute-btn");
          btn.innerText = this.isMuted ? "ğŸ”‡" : "ğŸ”Š";
        },
      };

      // Add Global Click Sound for Buttons
      document.addEventListener("click", (e) => {
        if (e.target.tagName === "BUTTON" || e.target.closest("button")) {
          // Avoid playing click sound twice if the button has its own handler that plays a specific sound (like answer buttons playing success/fail instantly?
          // Actually, answer buttons play sound inside checkAnswer logic.
          // Let's play 'click' for nav buttons mainly.
          if (!e.target.classList.contains("ans-btn")) {
            // Don't play generic click for game answers to avoid overlap with success/fail
            SoundManager.play("click");
          }
        }
      });
    </script>
  </body>
</html>
